import socket
SRV_ADDR = input("Type the server IP address: ")
SRV_PORT = int(input("Type the server port: "))

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) #Create a new socket
serverOrClient = int(input("Press: \n 1 for server \n 2 for client \n"))

# SERVER
if serverOrClient == 1:
    s.bind((SRV_ADDR, SRV_PORT)) #Bind the socket to the input address & port
    s.listen(1) #Listen for an incoming connection
    print("Server started! Waiting for connections...")
    connection, address = s.accept()
    print("Client connected with address:", address)
    while 1:
        data = connection.recv(1024)
        if not data: break
        connection.sendall(b'-- Message Received --\n')
        print(data.decode('utf-8'))
    connection.close()
# CLIENT
elif serverOrClient == 2:
    s.connect((SRV_ADDR, SRV_PORT)) 
    print("Conenction Established")
    message = input("Type message to send \n")
    s.sendall(message.encode()) #Encode the message before sending
    s.close()
else:
    print("Incorrect input")
    exit()

